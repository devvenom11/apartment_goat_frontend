"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/react-stickynode";
exports.ids = ["vendor-chunks/react-stickynode"];
exports.modules = {

/***/ "(ssr)/./node_modules/react-stickynode/dist/es/Sticky.js":
/*!*********************************************************!*\
  !*** ./node_modules/react-stickynode/dist/es/Sticky.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var core_js_modules_es_object_set_prototype_of_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.object.set-prototype-of.js */ \"(ssr)/./node_modules/core-js/modules/es.object.set-prototype-of.js\");\n/* harmony import */ var core_js_modules_es_object_set_prototype_of_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_set_prototype_of_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var core_js_modules_es_object_get_prototype_of_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.object.get-prototype-of.js */ \"(ssr)/./node_modules/core-js/modules/es.object.get-prototype-of.js\");\n/* harmony import */ var core_js_modules_es_object_get_prototype_of_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_get_prototype_of_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"(ssr)/./node_modules/core-js/modules/es.object.to-string.js\");\n/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var core_js_modules_es_reflect_construct_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/es.reflect.construct.js */ \"(ssr)/./node_modules/core-js/modules/es.reflect.construct.js\");\n/* harmony import */ var core_js_modules_es_reflect_construct_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_reflect_construct_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var core_js_modules_es_object_define_property_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"(ssr)/./node_modules/core-js/modules/es.object.define-property.js\");\n/* harmony import */ var core_js_modules_es_object_define_property_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_define_property_js__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! core-js/modules/es.symbol.js */ \"(ssr)/./node_modules/core-js/modules/es.symbol.js\");\n/* harmony import */ var core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"(ssr)/./node_modules/core-js/modules/es.symbol.description.js\");\n/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"(ssr)/./node_modules/core-js/modules/es.symbol.iterator.js\");\n/* harmony import */ var core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"(ssr)/./node_modules/core-js/modules/es.array.iterator.js\");\n/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"(ssr)/./node_modules/core-js/modules/es.string.iterator.js\");\n/* harmony import */ var core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"(ssr)/./node_modules/core-js/modules/web.dom-collections.iterator.js\");\n/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! prop-types */ \"(ssr)/./node_modules/prop-types/index.js\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var subscribe_ui_event__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! subscribe-ui-event */ \"(ssr)/./node_modules/subscribe-ui-event/index.es.js\");\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! classnames */ \"(ssr)/./node_modules/classnames/index.js\");\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var shallowequal__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! shallowequal */ \"(ssr)/./node_modules/shallowequal/index.js\");\n/* harmony import */ var shallowequal__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(shallowequal__WEBPACK_IMPORTED_MODULE_14__);\n/**\n * Copyright 2015, Yahoo! Inc.\n * Copyrights licensed under the New BSD License. See the accompanying LICENSE file for terms.\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n\n\n\n\n // constants\n\nvar STATUS_ORIGINAL = 0; // The default status, locating at the original position.\n\nvar STATUS_RELEASED = 1; // The released status, locating at somewhere on document but not default one.\n\nvar STATUS_FIXED = 2; // The sticky status, locating fixed to the top or the bottom of screen.\n\nvar TRANSFORM_PROP = 'transform'; // global variable for all instances\n\nvar doc;\nvar docBody;\nvar docEl;\nvar canEnableTransforms = true; // Use transform by default, so no Sticky on lower-end browser when no Modernizr\n\nvar M;\nvar scrollDelta = 0;\nvar win;\nvar winHeight = -1;\n\nvar Sticky = /*#__PURE__*/function (_Component) {\n  _inherits(Sticky, _Component);\n\n  var _super = _createSuper(Sticky);\n\n  function Sticky(props, context) {\n    var _this;\n\n    _classCallCheck(this, Sticky);\n\n    _this = _super.call(this, props, context);\n    _this.handleResize = _this.handleResize.bind(_assertThisInitialized(_this));\n    _this.handleScroll = _this.handleScroll.bind(_assertThisInitialized(_this));\n    _this.handleScrollStart = _this.handleScrollStart.bind(_assertThisInitialized(_this));\n    _this.delta = 0;\n    _this.stickyTop = 0;\n    _this.stickyBottom = 0;\n    _this.frozen = false;\n    _this.skipNextScrollEvent = false;\n    _this.scrollTop = -1;\n    _this.bottomBoundaryTarget;\n    _this.topTarget;\n    _this.subscribers;\n    _this.state = {\n      top: 0,\n      // A top offset from viewport top where Sticky sticks to when scrolling up\n      bottom: 0,\n      // A bottom offset from viewport top where Sticky sticks to when scrolling down\n      width: 0,\n      // Sticky width\n      height: 0,\n      // Sticky height\n      x: 0,\n      // The original x of Sticky\n      y: 0,\n      // The original y of Sticky\n      topBoundary: 0,\n      // The top boundary on document\n      bottomBoundary: Infinity,\n      // The bottom boundary on document\n      status: STATUS_ORIGINAL,\n      // The Sticky status\n      pos: 0,\n      // Real y-axis offset for rendering position-fixed and position-relative\n      activated: false // once browser info is available after mounted, it becomes true to avoid checksum error\n\n    };\n    return _this;\n  }\n\n  _createClass(Sticky, [{\n    key: \"getTargetHeight\",\n    value: function getTargetHeight(target) {\n      return target && target.offsetHeight || 0;\n    }\n  }, {\n    key: \"getTopPosition\",\n    value: function getTopPosition(top) {\n      // a top argument can be provided to override reading from the props\n      top = top || this.props.top || 0;\n\n      if (typeof top === 'string') {\n        if (!this.topTarget) {\n          this.topTarget = doc.querySelector(top);\n        }\n\n        top = this.getTargetHeight(this.topTarget);\n      }\n\n      return top;\n    }\n  }, {\n    key: \"getTargetBottom\",\n    value: function getTargetBottom(target) {\n      if (!target) {\n        return -1;\n      }\n\n      var rect = target.getBoundingClientRect();\n      return this.scrollTop + rect.bottom;\n    }\n  }, {\n    key: \"getBottomBoundary\",\n    value: function getBottomBoundary(bottomBoundary) {\n      // a bottomBoundary can be provided to avoid reading from the props\n      var boundary = bottomBoundary || this.props.bottomBoundary; // TODO, bottomBoundary was an object, depricate it later.\n\n      if (_typeof(boundary) === 'object') {\n        boundary = boundary.value || boundary.target || 0;\n      }\n\n      if (typeof boundary === 'string') {\n        if (!this.bottomBoundaryTarget) {\n          this.bottomBoundaryTarget = doc.querySelector(boundary);\n        }\n\n        boundary = this.getTargetBottom(this.bottomBoundaryTarget);\n      }\n\n      return boundary && boundary > 0 ? boundary : Infinity;\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this.setState({\n        status: STATUS_ORIGINAL,\n        pos: 0\n      });\n    }\n  }, {\n    key: \"release\",\n    value: function release(pos) {\n      this.setState({\n        status: STATUS_RELEASED,\n        pos: pos - this.state.y\n      });\n    }\n  }, {\n    key: \"fix\",\n    value: function fix(pos) {\n      this.setState({\n        status: STATUS_FIXED,\n        pos: pos\n      });\n    }\n    /**\n     * Update the initial position, width, and height. It should update whenever children change.\n     * @param {Object} options optional top and bottomBoundary new values\n     */\n\n  }, {\n    key: \"updateInitialDimension\",\n    value: function updateInitialDimension(options) {\n      options = options || {};\n\n      if (!this.outerElement || !this.innerElement) {\n        return;\n      }\n\n      var outerRect = this.outerElement.getBoundingClientRect();\n      var innerRect = this.innerElement.getBoundingClientRect();\n      var width = outerRect.width || outerRect.right - outerRect.left;\n      var height = innerRect.height || innerRect.bottom - innerRect.top;\n      var outerY = outerRect.top + this.scrollTop;\n      this.setState({\n        top: this.getTopPosition(options.top),\n        bottom: Math.min(this.state.top + height, winHeight),\n        width: width,\n        height: height,\n        x: outerRect.left,\n        y: outerY,\n        bottomBoundary: this.getBottomBoundary(options.bottomBoundary),\n        topBoundary: outerY\n      });\n    }\n  }, {\n    key: \"handleResize\",\n    value: function handleResize(e, ae) {\n      if (this.props.shouldFreeze()) {\n        return;\n      }\n\n      winHeight = ae.resize.height;\n      this.updateInitialDimension();\n      this.update();\n    }\n  }, {\n    key: \"handleScrollStart\",\n    value: function handleScrollStart(e, ae) {\n      this.frozen = this.props.shouldFreeze();\n\n      if (this.frozen) {\n        return;\n      }\n\n      if (this.scrollTop === ae.scroll.top) {\n        // Scroll position hasn't changed,\n        // do nothing\n        this.skipNextScrollEvent = true;\n      } else {\n        this.scrollTop = ae.scroll.top;\n        this.updateInitialDimension();\n      }\n    }\n  }, {\n    key: \"handleScroll\",\n    value: function handleScroll(e, ae) {\n      // Scroll doesn't need to be handled\n      if (this.skipNextScrollEvent) {\n        this.skipNextScrollEvent = false;\n        return;\n      }\n\n      scrollDelta = ae.scroll.delta;\n      this.scrollTop = ae.scroll.top;\n      this.update();\n    }\n    /**\n     * Update Sticky position.\n     */\n\n  }, {\n    key: \"update\",\n    value: function update() {\n      var disabled = !this.props.enabled || this.state.bottomBoundary - this.state.topBoundary <= this.state.height || this.state.width === 0 && this.state.height === 0;\n\n      if (disabled) {\n        if (this.state.status !== STATUS_ORIGINAL) {\n          this.reset();\n        }\n\n        return;\n      }\n\n      var delta = scrollDelta; // \"top\" and \"bottom\" are the positions that this.state.top and this.state.bottom project\n      // on document from viewport.\n\n      var top = this.scrollTop + this.state.top;\n      var bottom = this.scrollTop + this.state.bottom; // There are 2 principles to make sure Sticky won't get wrong so much:\n      // 1. Reset Sticky to the original postion when \"top\" <= topBoundary\n      // 2. Release Sticky to the bottom boundary when \"bottom\" >= bottomBoundary\n\n      if (top <= this.state.topBoundary) {\n        // #1\n        this.reset();\n      } else if (bottom >= this.state.bottomBoundary) {\n        // #2\n        this.stickyBottom = this.state.bottomBoundary;\n        this.stickyTop = this.stickyBottom - this.state.height;\n        this.release(this.stickyTop);\n      } else {\n        if (this.state.height > winHeight - this.state.top) {\n          // In this case, Sticky is higher then viewport minus top offset\n          switch (this.state.status) {\n            case STATUS_ORIGINAL:\n              this.release(this.state.y);\n              this.stickyTop = this.state.y;\n              this.stickyBottom = this.stickyTop + this.state.height;\n            // Commentting out \"break\" is on purpose, because there is a chance to transit to FIXED\n            // from ORIGINAL when calling window.scrollTo().\n            // break;\n\n            case STATUS_RELEASED:\n              // If \"top\" and \"bottom\" are inbetween stickyTop and stickyBottom, then Sticky is in\n              // RELEASE status. Otherwise, it changes to FIXED status, and its bottom sticks to\n              // viewport bottom when scrolling down, or its top sticks to viewport top when scrolling up.\n              this.stickyBottom = this.stickyTop + this.state.height;\n\n              if (delta > 0 && bottom > this.stickyBottom) {\n                this.fix(this.state.bottom - this.state.height);\n              } else if (delta < 0 && top < this.stickyTop) {\n                this.fix(this.state.top);\n              }\n\n              break;\n\n            case STATUS_FIXED:\n              var toRelease = true;\n              var pos = this.state.pos;\n              var height = this.state.height; // In regular cases, when Sticky is in FIXED status,\n              // 1. it's top will stick to the screen top,\n              // 2. it's bottom will stick to the screen bottom,\n              // 3. if not the cases above, then it's height gets changed\n\n              if (delta > 0 && pos === this.state.top) {\n                // case 1, and scrolling down\n                this.stickyTop = top - delta;\n                this.stickyBottom = this.stickyTop + height;\n              } else if (delta < 0 && pos === this.state.bottom - height) {\n                // case 2, and scrolling up\n                this.stickyBottom = bottom - delta;\n                this.stickyTop = this.stickyBottom - height;\n              } else if (pos !== this.state.bottom - height && pos !== this.state.top) {\n                // case 3\n                // This case only happens when Sticky's bottom sticks to the screen bottom and\n                // its height gets changed. Sticky should be in RELEASE status and update its\n                // sticky bottom by calculating how much height it changed.\n                var deltaHeight = pos + height - this.state.bottom;\n                this.stickyBottom = bottom - delta + deltaHeight;\n                this.stickyTop = this.stickyBottom - height;\n              } else {\n                toRelease = false;\n              }\n\n              if (toRelease) {\n                this.release(this.stickyTop);\n              }\n\n              break;\n          }\n        } else {\n          // In this case, Sticky is shorter then viewport minus top offset\n          // and will always fix to the top offset of viewport\n          this.fix(this.state.top);\n        }\n      }\n\n      this.delta = delta;\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      var _this2 = this;\n\n      if (prevState.status !== this.state.status && this.props.onStateChange) {\n        this.props.onStateChange({\n          status: this.state.status\n        });\n      } // check if we are up-to-date, is triggered in case of scroll restoration\n\n\n      if (this.state.top !== prevState.top) {\n        this.updateInitialDimension();\n        this.update();\n      }\n\n      var arePropsChanged = !shallowequal__WEBPACK_IMPORTED_MODULE_14___default()(this.props, prevProps);\n\n      if (arePropsChanged) {\n        // if the props for enabling are toggled, then trigger the update or reset depending on the current props\n        if (prevProps.enabled !== this.props.enabled) {\n          if (this.props.enabled) {\n            this.setState({\n              activated: true\n            }, function () {\n              _this2.updateInitialDimension();\n\n              _this2.update();\n            });\n          } else {\n            this.setState({\n              activated: false\n            }, function () {\n              _this2.reset();\n            });\n          }\n        } // if the top or bottomBoundary props were changed, then trigger the update\n        else if (prevProps.top !== this.props.top || prevProps.bottomBoundary !== this.props.bottomBoundary) {\n          this.updateInitialDimension();\n          this.update();\n        }\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var subscribers = this.subscribers || [];\n\n      for (var i = subscribers.length - 1; i >= 0; i--) {\n        this.subscribers[i].unsubscribe();\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      // Only initialize the globals if this is the first\n      // time this component type has been mounted\n      if (!win) {\n        win = window;\n        doc = document;\n        docEl = doc.documentElement;\n        docBody = doc.body;\n        winHeight = win.innerHeight || docEl.clientHeight;\n        M = window.Modernizr; // No Sticky on lower-end browser when no Modernizr\n\n        if (M && M.prefixed) {\n          canEnableTransforms = M.csstransforms3d;\n          TRANSFORM_PROP = M.prefixed('transform');\n        }\n      } // when mount, the scrollTop is not necessary on the top\n\n\n      this.scrollTop = docBody.scrollTop + docEl.scrollTop;\n\n      if (this.props.enabled) {\n        this.setState({\n          activated: true\n        });\n        this.updateInitialDimension();\n        this.update();\n      } // bind the listeners regardless if initially enabled - allows the component to toggle sticky functionality\n\n\n      this.subscribers = [(0,subscribe_ui_event__WEBPACK_IMPORTED_MODULE_12__.subscribe)('scrollStart', this.handleScrollStart.bind(this), {\n        useRAF: true\n      }), (0,subscribe_ui_event__WEBPACK_IMPORTED_MODULE_12__.subscribe)('scroll', this.handleScroll.bind(this), {\n        useRAF: true,\n        enableScrollInfo: true\n      }), (0,subscribe_ui_event__WEBPACK_IMPORTED_MODULE_12__.subscribe)('resize', this.handleResize.bind(this), {\n        enableResizeInfo: true\n      })];\n    }\n  }, {\n    key: \"translate\",\n    value: function translate(style, pos) {\n      var enableTransforms = canEnableTransforms && this.props.enableTransforms;\n\n      if (enableTransforms && this.state.activated) {\n        style[TRANSFORM_PROP] = 'translate3d(0,' + Math.round(pos) + 'px,0)';\n      } else {\n        style.top = pos + 'px';\n      }\n    }\n  }, {\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps, nextState) {\n      return !this.props.shouldFreeze() && !(shallowequal__WEBPACK_IMPORTED_MODULE_14___default()(this.props, nextProps) && shallowequal__WEBPACK_IMPORTED_MODULE_14___default()(this.state, nextState));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _classNames,\n          _this3 = this;\n\n      // TODO, \"overflow: auto\" prevents collapse, need a good way to get children height\n      var innerStyle = {\n        position: this.state.status === STATUS_FIXED ? 'fixed' : 'relative',\n        top: this.state.status === STATUS_FIXED ? '0px' : '',\n        zIndex: this.props.innerZ\n      };\n      var outerStyle = {}; // always use translate3d to enhance the performance\n\n      this.translate(innerStyle, this.state.pos);\n\n      if (this.state.status !== STATUS_ORIGINAL) {\n        innerStyle.width = this.state.width + 'px';\n        outerStyle.height = this.state.height + 'px';\n      }\n\n      var outerClasses = classnames__WEBPACK_IMPORTED_MODULE_13___default()('sticky-outer-wrapper', this.props.className, (_classNames = {}, _defineProperty(_classNames, this.props.activeClass, this.state.status === STATUS_FIXED), _defineProperty(_classNames, this.props.releasedClass, this.state.status === STATUS_RELEASED), _classNames));\n      var innerClasses = classnames__WEBPACK_IMPORTED_MODULE_13___default()('sticky-inner-wrapper', this.props.innerClass, _defineProperty({}, this.props.innerActiveClass, this.state.status === STATUS_FIXED));\n      var children = this.props.children;\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default().createElement(\"div\", {\n        ref: function ref(outer) {\n          _this3.outerElement = outer;\n        },\n        className: outerClasses,\n        style: outerStyle\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default().createElement(\"div\", {\n        ref: function ref(inner) {\n          _this3.innerElement = inner;\n        },\n        className: innerClasses,\n        style: innerStyle\n      }, typeof children === 'function' ? children({\n        status: this.state.status\n      }) : children));\n    }\n  }]);\n\n  return Sticky;\n}(react__WEBPACK_IMPORTED_MODULE_11__.Component);\n\nSticky.displayName = 'Sticky';\nSticky.defaultProps = {\n  shouldFreeze: function shouldFreeze() {\n    return false;\n  },\n  enabled: true,\n  top: 0,\n  bottomBoundary: 0,\n  enableTransforms: true,\n  activeClass: 'active',\n  releasedClass: 'released',\n  onStateChange: null,\n  innerClass: '',\n  innerActiveClass: ''\n};\n/**\n * @param {Bool} enabled A switch to enable or disable Sticky.\n * @param {String/Number} top A top offset px for Sticky. Could be a selector representing a node\n *        whose height should serve as the top offset.\n * @param {String/Number} bottomBoundary A bottom boundary px on document where Sticky will stop.\n *        Could be a selector representing a node whose bottom should serve as the bottom boudary.\n */\n\nSticky.propTypes = {\n  enabled: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().bool),\n  top: prop_types__WEBPACK_IMPORTED_MODULE_15___default().oneOfType([(prop_types__WEBPACK_IMPORTED_MODULE_15___default().string), (prop_types__WEBPACK_IMPORTED_MODULE_15___default().number)]),\n  bottomBoundary: prop_types__WEBPACK_IMPORTED_MODULE_15___default().oneOfType([(prop_types__WEBPACK_IMPORTED_MODULE_15___default().object), // TODO, may remove\n  (prop_types__WEBPACK_IMPORTED_MODULE_15___default().string), (prop_types__WEBPACK_IMPORTED_MODULE_15___default().number)]),\n  enableTransforms: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().bool),\n  activeClass: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().string),\n  releasedClass: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().string),\n  innerClass: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().string),\n  innerActiveClass: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().string),\n  className: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().string),\n  onStateChange: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().func),\n  shouldFreeze: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().func),\n  innerZ: prop_types__WEBPACK_IMPORTED_MODULE_15___default().oneOfType([(prop_types__WEBPACK_IMPORTED_MODULE_15___default().string), (prop_types__WEBPACK_IMPORTED_MODULE_15___default().number)])\n};\nSticky.STATUS_ORIGINAL = STATUS_ORIGINAL;\nSticky.STATUS_RELEASED = STATUS_RELEASED;\nSticky.STATUS_FIXED = STATUS_FIXED;\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Sticky);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvcmVhY3Qtc3RpY2t5bm9kZS9kaXN0L2VzL1N0aWNreS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ2E7O0FBRTBDO0FBQ0E7QUFDUDtBQUNDO0FBQ0s7QUFDaEI7QUFDWTtBQUNIO0FBQ0Q7QUFDQztBQUNVOztBQUV6RCw0Q0FBNEMsa0JBQWtCLGtDQUFrQyxvRUFBb0UsS0FBSyxPQUFPLG9CQUFvQjs7QUFFcE0sd0JBQXdCLDJCQUEyQixzR0FBc0cscUJBQXFCLG1CQUFtQiw4SEFBOEg7O0FBRS9ULGtEQUFrRCwwQ0FBMEM7O0FBRTVGLDRDQUE0QyxnQkFBZ0Isa0JBQWtCLE9BQU8sMkJBQTJCLHdEQUF3RCxnQ0FBZ0MsdURBQXVEOztBQUUvUCw4REFBOEQsc0VBQXNFLDhEQUE4RCxrREFBa0QsaUJBQWlCLEdBQUc7O0FBRXhRLDJDQUEyQywrREFBK0QsNkVBQTZFLHlFQUF5RSxlQUFlLHVEQUF1RCxHQUFHLCtDQUErQyxpQkFBaUIsR0FBRzs7QUFFNVksaUNBQWlDLDBHQUEwRyxpQkFBaUIsYUFBYTs7QUFFekssaUNBQWlDLDZEQUE2RCx5Q0FBeUMsOENBQThDLGlDQUFpQyxtREFBbUQsMkRBQTJELE9BQU8seUNBQXlDOztBQUVwWCxrREFBa0QsMEVBQTBFLGVBQWUsNEJBQTRCLG1GQUFtRjs7QUFFMVAsd0NBQXdDLHVCQUF1Qix5RkFBeUY7O0FBRXhKLHVDQUF1Qyx3RUFBd0UsMENBQTBDLDhDQUE4QyxNQUFNLDRFQUE0RSxJQUFJLGVBQWUsWUFBWTs7QUFFeFQsOEJBQThCLHVHQUF1RyxtREFBbUQ7O0FBRS9JO0FBQ047QUFDWTtBQUNYO0FBQ0ksQ0FBQzs7QUFFekMseUJBQXlCOztBQUV6Qix5QkFBeUI7O0FBRXpCLHNCQUFzQjs7QUFFdEIsa0NBQWtDOztBQUVsQztBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0M7O0FBRWhDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxrRUFBa0U7O0FBRWxFO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCOztBQUVBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSwrQkFBK0I7QUFDL0I7O0FBRUE7QUFDQSx1REFBdUQ7QUFDdkQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsOENBQThDO0FBQzlDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxRQUFROzs7QUFHUjtBQUNBO0FBQ0E7QUFDQTs7QUFFQSw2QkFBNkIsb0RBQVk7O0FBRXpDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjs7QUFFQTtBQUNBLGFBQWE7QUFDYixZQUFZO0FBQ1o7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLGFBQWE7QUFDYjtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBLDJDQUEyQyxRQUFRO0FBQ25EO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4Qjs7QUFFOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFROzs7QUFHUjs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFFBQVE7OztBQUdSLDBCQUEwQiw4REFBUztBQUNuQztBQUNBLE9BQU8sR0FBRyw4REFBUztBQUNuQjtBQUNBO0FBQ0EsT0FBTyxHQUFHLDhEQUFTO0FBQ25CO0FBQ0EsT0FBTztBQUNQO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsNkNBQTZDLG9EQUFZLDJCQUEyQixvREFBWTtBQUNoRztBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkI7O0FBRTNCOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHlCQUF5QixrREFBVSxnRUFBZ0U7QUFDbkcseUJBQXlCLGtEQUFVLGtFQUFrRTtBQUNyRztBQUNBLDBCQUEwQiwyREFBbUI7QUFDN0M7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsT0FBTyxlQUFlLDJEQUFtQjtBQUN6QztBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxPQUFPO0FBQ1A7QUFDQSxHQUFHOztBQUVIO0FBQ0EsQ0FBQyxDQUFDLDZDQUFTOztBQUVYO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE1BQU07QUFDakIsV0FBVyxlQUFlO0FBQzFCO0FBQ0EsV0FBVyxlQUFlO0FBQzFCO0FBQ0E7O0FBRUE7QUFDQSxXQUFXLHlEQUFjO0FBQ3pCLE9BQU8sNERBQW1CLEVBQUUsMkRBQWdCLEVBQUUsMkRBQWdCO0FBQzlELGtCQUFrQiw0REFBbUIsRUFBRSwyREFBZ0I7QUFDdkQsRUFBRSwyREFBZ0IsRUFBRSwyREFBZ0I7QUFDcEMsb0JBQW9CLHlEQUFjO0FBQ2xDLGVBQWUsMkRBQWdCO0FBQy9CLGlCQUFpQiwyREFBZ0I7QUFDakMsY0FBYywyREFBZ0I7QUFDOUIsb0JBQW9CLDJEQUFnQjtBQUNwQyxhQUFhLDJEQUFnQjtBQUM3QixpQkFBaUIseURBQWM7QUFDL0IsZ0JBQWdCLHlEQUFjO0FBQzlCLFVBQVUsNERBQW1CLEVBQUUsMkRBQWdCLEVBQUUsMkRBQWdCO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUVBQWUsTUFBTSIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYnNpdGUvLi9ub2RlX21vZHVsZXMvcmVhY3Qtc3RpY2t5bm9kZS9kaXN0L2VzL1N0aWNreS5qcz81ODg5Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IDIwMTUsIFlhaG9vISBJbmMuXG4gKiBDb3B5cmlnaHRzIGxpY2Vuc2VkIHVuZGVyIHRoZSBOZXcgQlNEIExpY2Vuc2UuIFNlZSB0aGUgYWNjb21wYW55aW5nIExJQ0VOU0UgZmlsZSBmb3IgdGVybXMuXG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IFwiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5zZXQtcHJvdG90eXBlLW9mLmpzXCI7XG5pbXBvcnQgXCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1wcm90b3R5cGUtb2YuanNcIjtcbmltcG9ydCBcImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzXCI7XG5pbXBvcnQgXCJjb3JlLWpzL21vZHVsZXMvZXMucmVmbGVjdC5jb25zdHJ1Y3QuanNcIjtcbmltcG9ydCBcImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZGVmaW5lLXByb3BlcnR5LmpzXCI7XG5pbXBvcnQgXCJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmpzXCI7XG5pbXBvcnQgXCJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uLmpzXCI7XG5pbXBvcnQgXCJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLml0ZXJhdG9yLmpzXCI7XG5pbXBvcnQgXCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaXRlcmF0b3IuanNcIjtcbmltcG9ydCBcImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanNcIjtcbmltcG9ydCBcImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzXCI7XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9XG5cbmZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjsgcmV0dXJuIF90eXBlb2YgPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBcInN5bWJvbFwiID09IHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9LCBfdHlwZW9mKG9iaik7IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb25zdHJ1Y3RvciwgXCJwcm90b3R5cGVcIiwgeyB3cml0YWJsZTogZmFsc2UgfSk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb25cIik7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBPYmplY3QuZGVmaW5lUHJvcGVydHkoc3ViQ2xhc3MsIFwicHJvdG90eXBlXCIsIHsgd3JpdGFibGU6IGZhbHNlIH0pOyBpZiAoc3VwZXJDbGFzcykgX3NldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTsgfVxuXG5mdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2YuYmluZCgpIDogZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgby5fX3Byb3RvX18gPSBwOyByZXR1cm4gbzsgfTsgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsgfVxuXG5mdW5jdGlvbiBfY3JlYXRlU3VwZXIoRGVyaXZlZCkgeyB2YXIgaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCA9IF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKTsgcmV0dXJuIGZ1bmN0aW9uIF9jcmVhdGVTdXBlckludGVybmFsKCkgeyB2YXIgU3VwZXIgPSBfZ2V0UHJvdG90eXBlT2YoRGVyaXZlZCksIHJlc3VsdDsgaWYgKGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QpIHsgdmFyIE5ld1RhcmdldCA9IF9nZXRQcm90b3R5cGVPZih0aGlzKS5jb25zdHJ1Y3RvcjsgcmVzdWx0ID0gUmVmbGVjdC5jb25zdHJ1Y3QoU3VwZXIsIGFyZ3VtZW50cywgTmV3VGFyZ2V0KTsgfSBlbHNlIHsgcmVzdWx0ID0gU3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfSByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgcmVzdWx0KTsgfTsgfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpKSB7IHJldHVybiBjYWxsOyB9IGVsc2UgaWYgKGNhbGwgIT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRGVyaXZlZCBjb25zdHJ1Y3RvcnMgbWF5IG9ubHkgcmV0dXJuIG9iamVjdCBvciB1bmRlZmluZWRcIik7IH0gcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7IH1cblxuZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7IGlmIChzZWxmID09PSB2b2lkIDApIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSB7IGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhUmVmbGVjdC5jb25zdHJ1Y3QpIHJldHVybiBmYWxzZTsgaWYgKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pIHJldHVybiBmYWxzZTsgaWYgKHR5cGVvZiBQcm94eSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gdHJ1ZTsgdHJ5IHsgQm9vbGVhbi5wcm90b3R5cGUudmFsdWVPZi5jYWxsKFJlZmxlY3QuY29uc3RydWN0KEJvb2xlYW4sIFtdLCBmdW5jdGlvbiAoKSB7fSkpOyByZXR1cm4gdHJ1ZTsgfSBjYXRjaCAoZSkgeyByZXR1cm4gZmFsc2U7IH0gfVxuXG5mdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyBfZ2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3QuZ2V0UHJvdG90eXBlT2YuYmluZCgpIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgcmV0dXJuIG8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihvKTsgfTsgcmV0dXJuIF9nZXRQcm90b3R5cGVPZihvKTsgfVxuXG5pbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCB7IHN1YnNjcmliZSB9IGZyb20gJ3N1YnNjcmliZS11aS1ldmVudCc7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCBzaGFsbG93RXF1YWwgZnJvbSAnc2hhbGxvd2VxdWFsJzsgLy8gY29uc3RhbnRzXG5cbnZhciBTVEFUVVNfT1JJR0lOQUwgPSAwOyAvLyBUaGUgZGVmYXVsdCBzdGF0dXMsIGxvY2F0aW5nIGF0IHRoZSBvcmlnaW5hbCBwb3NpdGlvbi5cblxudmFyIFNUQVRVU19SRUxFQVNFRCA9IDE7IC8vIFRoZSByZWxlYXNlZCBzdGF0dXMsIGxvY2F0aW5nIGF0IHNvbWV3aGVyZSBvbiBkb2N1bWVudCBidXQgbm90IGRlZmF1bHQgb25lLlxuXG52YXIgU1RBVFVTX0ZJWEVEID0gMjsgLy8gVGhlIHN0aWNreSBzdGF0dXMsIGxvY2F0aW5nIGZpeGVkIHRvIHRoZSB0b3Agb3IgdGhlIGJvdHRvbSBvZiBzY3JlZW4uXG5cbnZhciBUUkFOU0ZPUk1fUFJPUCA9ICd0cmFuc2Zvcm0nOyAvLyBnbG9iYWwgdmFyaWFibGUgZm9yIGFsbCBpbnN0YW5jZXNcblxudmFyIGRvYztcbnZhciBkb2NCb2R5O1xudmFyIGRvY0VsO1xudmFyIGNhbkVuYWJsZVRyYW5zZm9ybXMgPSB0cnVlOyAvLyBVc2UgdHJhbnNmb3JtIGJ5IGRlZmF1bHQsIHNvIG5vIFN0aWNreSBvbiBsb3dlci1lbmQgYnJvd3NlciB3aGVuIG5vIE1vZGVybml6clxuXG52YXIgTTtcbnZhciBzY3JvbGxEZWx0YSA9IDA7XG52YXIgd2luO1xudmFyIHdpbkhlaWdodCA9IC0xO1xuXG52YXIgU3RpY2t5ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhTdGlja3ksIF9Db21wb25lbnQpO1xuXG4gIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoU3RpY2t5KTtcblxuICBmdW5jdGlvbiBTdGlja3kocHJvcHMsIGNvbnRleHQpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU3RpY2t5KTtcblxuICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMsIGNvbnRleHQpO1xuICAgIF90aGlzLmhhbmRsZVJlc2l6ZSA9IF90aGlzLmhhbmRsZVJlc2l6ZS5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTtcbiAgICBfdGhpcy5oYW5kbGVTY3JvbGwgPSBfdGhpcy5oYW5kbGVTY3JvbGwuYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7XG4gICAgX3RoaXMuaGFuZGxlU2Nyb2xsU3RhcnQgPSBfdGhpcy5oYW5kbGVTY3JvbGxTdGFydC5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTtcbiAgICBfdGhpcy5kZWx0YSA9IDA7XG4gICAgX3RoaXMuc3RpY2t5VG9wID0gMDtcbiAgICBfdGhpcy5zdGlja3lCb3R0b20gPSAwO1xuICAgIF90aGlzLmZyb3plbiA9IGZhbHNlO1xuICAgIF90aGlzLnNraXBOZXh0U2Nyb2xsRXZlbnQgPSBmYWxzZTtcbiAgICBfdGhpcy5zY3JvbGxUb3AgPSAtMTtcbiAgICBfdGhpcy5ib3R0b21Cb3VuZGFyeVRhcmdldDtcbiAgICBfdGhpcy50b3BUYXJnZXQ7XG4gICAgX3RoaXMuc3Vic2NyaWJlcnM7XG4gICAgX3RoaXMuc3RhdGUgPSB7XG4gICAgICB0b3A6IDAsXG4gICAgICAvLyBBIHRvcCBvZmZzZXQgZnJvbSB2aWV3cG9ydCB0b3Agd2hlcmUgU3RpY2t5IHN0aWNrcyB0byB3aGVuIHNjcm9sbGluZyB1cFxuICAgICAgYm90dG9tOiAwLFxuICAgICAgLy8gQSBib3R0b20gb2Zmc2V0IGZyb20gdmlld3BvcnQgdG9wIHdoZXJlIFN0aWNreSBzdGlja3MgdG8gd2hlbiBzY3JvbGxpbmcgZG93blxuICAgICAgd2lkdGg6IDAsXG4gICAgICAvLyBTdGlja3kgd2lkdGhcbiAgICAgIGhlaWdodDogMCxcbiAgICAgIC8vIFN0aWNreSBoZWlnaHRcbiAgICAgIHg6IDAsXG4gICAgICAvLyBUaGUgb3JpZ2luYWwgeCBvZiBTdGlja3lcbiAgICAgIHk6IDAsXG4gICAgICAvLyBUaGUgb3JpZ2luYWwgeSBvZiBTdGlja3lcbiAgICAgIHRvcEJvdW5kYXJ5OiAwLFxuICAgICAgLy8gVGhlIHRvcCBib3VuZGFyeSBvbiBkb2N1bWVudFxuICAgICAgYm90dG9tQm91bmRhcnk6IEluZmluaXR5LFxuICAgICAgLy8gVGhlIGJvdHRvbSBib3VuZGFyeSBvbiBkb2N1bWVudFxuICAgICAgc3RhdHVzOiBTVEFUVVNfT1JJR0lOQUwsXG4gICAgICAvLyBUaGUgU3RpY2t5IHN0YXR1c1xuICAgICAgcG9zOiAwLFxuICAgICAgLy8gUmVhbCB5LWF4aXMgb2Zmc2V0IGZvciByZW5kZXJpbmcgcG9zaXRpb24tZml4ZWQgYW5kIHBvc2l0aW9uLXJlbGF0aXZlXG4gICAgICBhY3RpdmF0ZWQ6IGZhbHNlIC8vIG9uY2UgYnJvd3NlciBpbmZvIGlzIGF2YWlsYWJsZSBhZnRlciBtb3VudGVkLCBpdCBiZWNvbWVzIHRydWUgdG8gYXZvaWQgY2hlY2tzdW0gZXJyb3JcblxuICAgIH07XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFN0aWNreSwgW3tcbiAgICBrZXk6IFwiZ2V0VGFyZ2V0SGVpZ2h0XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldFRhcmdldEhlaWdodCh0YXJnZXQpIHtcbiAgICAgIHJldHVybiB0YXJnZXQgJiYgdGFyZ2V0Lm9mZnNldEhlaWdodCB8fCAwO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJnZXRUb3BQb3NpdGlvblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRUb3BQb3NpdGlvbih0b3ApIHtcbiAgICAgIC8vIGEgdG9wIGFyZ3VtZW50IGNhbiBiZSBwcm92aWRlZCB0byBvdmVycmlkZSByZWFkaW5nIGZyb20gdGhlIHByb3BzXG4gICAgICB0b3AgPSB0b3AgfHwgdGhpcy5wcm9wcy50b3AgfHwgMDtcblxuICAgICAgaWYgKHR5cGVvZiB0b3AgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGlmICghdGhpcy50b3BUYXJnZXQpIHtcbiAgICAgICAgICB0aGlzLnRvcFRhcmdldCA9IGRvYy5xdWVyeVNlbGVjdG9yKHRvcCk7XG4gICAgICAgIH1cblxuICAgICAgICB0b3AgPSB0aGlzLmdldFRhcmdldEhlaWdodCh0aGlzLnRvcFRhcmdldCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0b3A7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImdldFRhcmdldEJvdHRvbVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRUYXJnZXRCb3R0b20odGFyZ2V0KSB7XG4gICAgICBpZiAoIXRhcmdldCkge1xuICAgICAgICByZXR1cm4gLTE7XG4gICAgICB9XG5cbiAgICAgIHZhciByZWN0ID0gdGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgcmV0dXJuIHRoaXMuc2Nyb2xsVG9wICsgcmVjdC5ib3R0b207XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImdldEJvdHRvbUJvdW5kYXJ5XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldEJvdHRvbUJvdW5kYXJ5KGJvdHRvbUJvdW5kYXJ5KSB7XG4gICAgICAvLyBhIGJvdHRvbUJvdW5kYXJ5IGNhbiBiZSBwcm92aWRlZCB0byBhdm9pZCByZWFkaW5nIGZyb20gdGhlIHByb3BzXG4gICAgICB2YXIgYm91bmRhcnkgPSBib3R0b21Cb3VuZGFyeSB8fCB0aGlzLnByb3BzLmJvdHRvbUJvdW5kYXJ5OyAvLyBUT0RPLCBib3R0b21Cb3VuZGFyeSB3YXMgYW4gb2JqZWN0LCBkZXByaWNhdGUgaXQgbGF0ZXIuXG5cbiAgICAgIGlmIChfdHlwZW9mKGJvdW5kYXJ5KSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgYm91bmRhcnkgPSBib3VuZGFyeS52YWx1ZSB8fCBib3VuZGFyeS50YXJnZXQgfHwgMDtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBib3VuZGFyeSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgaWYgKCF0aGlzLmJvdHRvbUJvdW5kYXJ5VGFyZ2V0KSB7XG4gICAgICAgICAgdGhpcy5ib3R0b21Cb3VuZGFyeVRhcmdldCA9IGRvYy5xdWVyeVNlbGVjdG9yKGJvdW5kYXJ5KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGJvdW5kYXJ5ID0gdGhpcy5nZXRUYXJnZXRCb3R0b20odGhpcy5ib3R0b21Cb3VuZGFyeVRhcmdldCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBib3VuZGFyeSAmJiBib3VuZGFyeSA+IDAgPyBib3VuZGFyeSA6IEluZmluaXR5O1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZXNldFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZXNldCgpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBzdGF0dXM6IFNUQVRVU19PUklHSU5BTCxcbiAgICAgICAgcG9zOiAwXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVsZWFzZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZWxlYXNlKHBvcykge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIHN0YXR1czogU1RBVFVTX1JFTEVBU0VELFxuICAgICAgICBwb3M6IHBvcyAtIHRoaXMuc3RhdGUueVxuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImZpeFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBmaXgocG9zKSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgc3RhdHVzOiBTVEFUVVNfRklYRUQsXG4gICAgICAgIHBvczogcG9zXG4gICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSBpbml0aWFsIHBvc2l0aW9uLCB3aWR0aCwgYW5kIGhlaWdodC4gSXQgc2hvdWxkIHVwZGF0ZSB3aGVuZXZlciBjaGlsZHJlbiBjaGFuZ2UuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgb3B0aW9uYWwgdG9wIGFuZCBib3R0b21Cb3VuZGFyeSBuZXcgdmFsdWVzXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJ1cGRhdGVJbml0aWFsRGltZW5zaW9uXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZUluaXRpYWxEaW1lbnNpb24ob3B0aW9ucykge1xuICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgICAgIGlmICghdGhpcy5vdXRlckVsZW1lbnQgfHwgIXRoaXMuaW5uZXJFbGVtZW50KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIG91dGVyUmVjdCA9IHRoaXMub3V0ZXJFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgdmFyIGlubmVyUmVjdCA9IHRoaXMuaW5uZXJFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgdmFyIHdpZHRoID0gb3V0ZXJSZWN0LndpZHRoIHx8IG91dGVyUmVjdC5yaWdodCAtIG91dGVyUmVjdC5sZWZ0O1xuICAgICAgdmFyIGhlaWdodCA9IGlubmVyUmVjdC5oZWlnaHQgfHwgaW5uZXJSZWN0LmJvdHRvbSAtIGlubmVyUmVjdC50b3A7XG4gICAgICB2YXIgb3V0ZXJZID0gb3V0ZXJSZWN0LnRvcCArIHRoaXMuc2Nyb2xsVG9wO1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIHRvcDogdGhpcy5nZXRUb3BQb3NpdGlvbihvcHRpb25zLnRvcCksXG4gICAgICAgIGJvdHRvbTogTWF0aC5taW4odGhpcy5zdGF0ZS50b3AgKyBoZWlnaHQsIHdpbkhlaWdodCksXG4gICAgICAgIHdpZHRoOiB3aWR0aCxcbiAgICAgICAgaGVpZ2h0OiBoZWlnaHQsXG4gICAgICAgIHg6IG91dGVyUmVjdC5sZWZ0LFxuICAgICAgICB5OiBvdXRlclksXG4gICAgICAgIGJvdHRvbUJvdW5kYXJ5OiB0aGlzLmdldEJvdHRvbUJvdW5kYXJ5KG9wdGlvbnMuYm90dG9tQm91bmRhcnkpLFxuICAgICAgICB0b3BCb3VuZGFyeTogb3V0ZXJZXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaGFuZGxlUmVzaXplXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZVJlc2l6ZShlLCBhZSkge1xuICAgICAgaWYgKHRoaXMucHJvcHMuc2hvdWxkRnJlZXplKCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB3aW5IZWlnaHQgPSBhZS5yZXNpemUuaGVpZ2h0O1xuICAgICAgdGhpcy51cGRhdGVJbml0aWFsRGltZW5zaW9uKCk7XG4gICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJoYW5kbGVTY3JvbGxTdGFydFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVTY3JvbGxTdGFydChlLCBhZSkge1xuICAgICAgdGhpcy5mcm96ZW4gPSB0aGlzLnByb3BzLnNob3VsZEZyZWV6ZSgpO1xuXG4gICAgICBpZiAodGhpcy5mcm96ZW4pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5zY3JvbGxUb3AgPT09IGFlLnNjcm9sbC50b3ApIHtcbiAgICAgICAgLy8gU2Nyb2xsIHBvc2l0aW9uIGhhc24ndCBjaGFuZ2VkLFxuICAgICAgICAvLyBkbyBub3RoaW5nXG4gICAgICAgIHRoaXMuc2tpcE5leHRTY3JvbGxFdmVudCA9IHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnNjcm9sbFRvcCA9IGFlLnNjcm9sbC50b3A7XG4gICAgICAgIHRoaXMudXBkYXRlSW5pdGlhbERpbWVuc2lvbigpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJoYW5kbGVTY3JvbGxcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlU2Nyb2xsKGUsIGFlKSB7XG4gICAgICAvLyBTY3JvbGwgZG9lc24ndCBuZWVkIHRvIGJlIGhhbmRsZWRcbiAgICAgIGlmICh0aGlzLnNraXBOZXh0U2Nyb2xsRXZlbnQpIHtcbiAgICAgICAgdGhpcy5za2lwTmV4dFNjcm9sbEV2ZW50ID0gZmFsc2U7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgc2Nyb2xsRGVsdGEgPSBhZS5zY3JvbGwuZGVsdGE7XG4gICAgICB0aGlzLnNjcm9sbFRvcCA9IGFlLnNjcm9sbC50b3A7XG4gICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgU3RpY2t5IHBvc2l0aW9uLlxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwidXBkYXRlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZSgpIHtcbiAgICAgIHZhciBkaXNhYmxlZCA9ICF0aGlzLnByb3BzLmVuYWJsZWQgfHwgdGhpcy5zdGF0ZS5ib3R0b21Cb3VuZGFyeSAtIHRoaXMuc3RhdGUudG9wQm91bmRhcnkgPD0gdGhpcy5zdGF0ZS5oZWlnaHQgfHwgdGhpcy5zdGF0ZS53aWR0aCA9PT0gMCAmJiB0aGlzLnN0YXRlLmhlaWdodCA9PT0gMDtcblxuICAgICAgaWYgKGRpc2FibGVkKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLnN0YXR1cyAhPT0gU1RBVFVTX09SSUdJTkFMKSB7XG4gICAgICAgICAgdGhpcy5yZXNldCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgZGVsdGEgPSBzY3JvbGxEZWx0YTsgLy8gXCJ0b3BcIiBhbmQgXCJib3R0b21cIiBhcmUgdGhlIHBvc2l0aW9ucyB0aGF0IHRoaXMuc3RhdGUudG9wIGFuZCB0aGlzLnN0YXRlLmJvdHRvbSBwcm9qZWN0XG4gICAgICAvLyBvbiBkb2N1bWVudCBmcm9tIHZpZXdwb3J0LlxuXG4gICAgICB2YXIgdG9wID0gdGhpcy5zY3JvbGxUb3AgKyB0aGlzLnN0YXRlLnRvcDtcbiAgICAgIHZhciBib3R0b20gPSB0aGlzLnNjcm9sbFRvcCArIHRoaXMuc3RhdGUuYm90dG9tOyAvLyBUaGVyZSBhcmUgMiBwcmluY2lwbGVzIHRvIG1ha2Ugc3VyZSBTdGlja3kgd29uJ3QgZ2V0IHdyb25nIHNvIG11Y2g6XG4gICAgICAvLyAxLiBSZXNldCBTdGlja3kgdG8gdGhlIG9yaWdpbmFsIHBvc3Rpb24gd2hlbiBcInRvcFwiIDw9IHRvcEJvdW5kYXJ5XG4gICAgICAvLyAyLiBSZWxlYXNlIFN0aWNreSB0byB0aGUgYm90dG9tIGJvdW5kYXJ5IHdoZW4gXCJib3R0b21cIiA+PSBib3R0b21Cb3VuZGFyeVxuXG4gICAgICBpZiAodG9wIDw9IHRoaXMuc3RhdGUudG9wQm91bmRhcnkpIHtcbiAgICAgICAgLy8gIzFcbiAgICAgICAgdGhpcy5yZXNldCgpO1xuICAgICAgfSBlbHNlIGlmIChib3R0b20gPj0gdGhpcy5zdGF0ZS5ib3R0b21Cb3VuZGFyeSkge1xuICAgICAgICAvLyAjMlxuICAgICAgICB0aGlzLnN0aWNreUJvdHRvbSA9IHRoaXMuc3RhdGUuYm90dG9tQm91bmRhcnk7XG4gICAgICAgIHRoaXMuc3RpY2t5VG9wID0gdGhpcy5zdGlja3lCb3R0b20gLSB0aGlzLnN0YXRlLmhlaWdodDtcbiAgICAgICAgdGhpcy5yZWxlYXNlKHRoaXMuc3RpY2t5VG9wKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmhlaWdodCA+IHdpbkhlaWdodCAtIHRoaXMuc3RhdGUudG9wKSB7XG4gICAgICAgICAgLy8gSW4gdGhpcyBjYXNlLCBTdGlja3kgaXMgaGlnaGVyIHRoZW4gdmlld3BvcnQgbWludXMgdG9wIG9mZnNldFxuICAgICAgICAgIHN3aXRjaCAodGhpcy5zdGF0ZS5zdGF0dXMpIHtcbiAgICAgICAgICAgIGNhc2UgU1RBVFVTX09SSUdJTkFMOlxuICAgICAgICAgICAgICB0aGlzLnJlbGVhc2UodGhpcy5zdGF0ZS55KTtcbiAgICAgICAgICAgICAgdGhpcy5zdGlja3lUb3AgPSB0aGlzLnN0YXRlLnk7XG4gICAgICAgICAgICAgIHRoaXMuc3RpY2t5Qm90dG9tID0gdGhpcy5zdGlja3lUb3AgKyB0aGlzLnN0YXRlLmhlaWdodDtcbiAgICAgICAgICAgIC8vIENvbW1lbnR0aW5nIG91dCBcImJyZWFrXCIgaXMgb24gcHVycG9zZSwgYmVjYXVzZSB0aGVyZSBpcyBhIGNoYW5jZSB0byB0cmFuc2l0IHRvIEZJWEVEXG4gICAgICAgICAgICAvLyBmcm9tIE9SSUdJTkFMIHdoZW4gY2FsbGluZyB3aW5kb3cuc2Nyb2xsVG8oKS5cbiAgICAgICAgICAgIC8vIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIFNUQVRVU19SRUxFQVNFRDpcbiAgICAgICAgICAgICAgLy8gSWYgXCJ0b3BcIiBhbmQgXCJib3R0b21cIiBhcmUgaW5iZXR3ZWVuIHN0aWNreVRvcCBhbmQgc3RpY2t5Qm90dG9tLCB0aGVuIFN0aWNreSBpcyBpblxuICAgICAgICAgICAgICAvLyBSRUxFQVNFIHN0YXR1cy4gT3RoZXJ3aXNlLCBpdCBjaGFuZ2VzIHRvIEZJWEVEIHN0YXR1cywgYW5kIGl0cyBib3R0b20gc3RpY2tzIHRvXG4gICAgICAgICAgICAgIC8vIHZpZXdwb3J0IGJvdHRvbSB3aGVuIHNjcm9sbGluZyBkb3duLCBvciBpdHMgdG9wIHN0aWNrcyB0byB2aWV3cG9ydCB0b3Agd2hlbiBzY3JvbGxpbmcgdXAuXG4gICAgICAgICAgICAgIHRoaXMuc3RpY2t5Qm90dG9tID0gdGhpcy5zdGlja3lUb3AgKyB0aGlzLnN0YXRlLmhlaWdodDtcblxuICAgICAgICAgICAgICBpZiAoZGVsdGEgPiAwICYmIGJvdHRvbSA+IHRoaXMuc3RpY2t5Qm90dG9tKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5maXgodGhpcy5zdGF0ZS5ib3R0b20gLSB0aGlzLnN0YXRlLmhlaWdodCk7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGVsdGEgPCAwICYmIHRvcCA8IHRoaXMuc3RpY2t5VG9wKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5maXgodGhpcy5zdGF0ZS50b3ApO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgU1RBVFVTX0ZJWEVEOlxuICAgICAgICAgICAgICB2YXIgdG9SZWxlYXNlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgdmFyIHBvcyA9IHRoaXMuc3RhdGUucG9zO1xuICAgICAgICAgICAgICB2YXIgaGVpZ2h0ID0gdGhpcy5zdGF0ZS5oZWlnaHQ7IC8vIEluIHJlZ3VsYXIgY2FzZXMsIHdoZW4gU3RpY2t5IGlzIGluIEZJWEVEIHN0YXR1cyxcbiAgICAgICAgICAgICAgLy8gMS4gaXQncyB0b3Agd2lsbCBzdGljayB0byB0aGUgc2NyZWVuIHRvcCxcbiAgICAgICAgICAgICAgLy8gMi4gaXQncyBib3R0b20gd2lsbCBzdGljayB0byB0aGUgc2NyZWVuIGJvdHRvbSxcbiAgICAgICAgICAgICAgLy8gMy4gaWYgbm90IHRoZSBjYXNlcyBhYm92ZSwgdGhlbiBpdCdzIGhlaWdodCBnZXRzIGNoYW5nZWRcblxuICAgICAgICAgICAgICBpZiAoZGVsdGEgPiAwICYmIHBvcyA9PT0gdGhpcy5zdGF0ZS50b3ApIHtcbiAgICAgICAgICAgICAgICAvLyBjYXNlIDEsIGFuZCBzY3JvbGxpbmcgZG93blxuICAgICAgICAgICAgICAgIHRoaXMuc3RpY2t5VG9wID0gdG9wIC0gZGVsdGE7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGlja3lCb3R0b20gPSB0aGlzLnN0aWNreVRvcCArIGhlaWdodDtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChkZWx0YSA8IDAgJiYgcG9zID09PSB0aGlzLnN0YXRlLmJvdHRvbSAtIGhlaWdodCkge1xuICAgICAgICAgICAgICAgIC8vIGNhc2UgMiwgYW5kIHNjcm9sbGluZyB1cFxuICAgICAgICAgICAgICAgIHRoaXMuc3RpY2t5Qm90dG9tID0gYm90dG9tIC0gZGVsdGE7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGlja3lUb3AgPSB0aGlzLnN0aWNreUJvdHRvbSAtIGhlaWdodDtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChwb3MgIT09IHRoaXMuc3RhdGUuYm90dG9tIC0gaGVpZ2h0ICYmIHBvcyAhPT0gdGhpcy5zdGF0ZS50b3ApIHtcbiAgICAgICAgICAgICAgICAvLyBjYXNlIDNcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGNhc2Ugb25seSBoYXBwZW5zIHdoZW4gU3RpY2t5J3MgYm90dG9tIHN0aWNrcyB0byB0aGUgc2NyZWVuIGJvdHRvbSBhbmRcbiAgICAgICAgICAgICAgICAvLyBpdHMgaGVpZ2h0IGdldHMgY2hhbmdlZC4gU3RpY2t5IHNob3VsZCBiZSBpbiBSRUxFQVNFIHN0YXR1cyBhbmQgdXBkYXRlIGl0c1xuICAgICAgICAgICAgICAgIC8vIHN0aWNreSBib3R0b20gYnkgY2FsY3VsYXRpbmcgaG93IG11Y2ggaGVpZ2h0IGl0IGNoYW5nZWQuXG4gICAgICAgICAgICAgICAgdmFyIGRlbHRhSGVpZ2h0ID0gcG9zICsgaGVpZ2h0IC0gdGhpcy5zdGF0ZS5ib3R0b207XG4gICAgICAgICAgICAgICAgdGhpcy5zdGlja3lCb3R0b20gPSBib3R0b20gLSBkZWx0YSArIGRlbHRhSGVpZ2h0O1xuICAgICAgICAgICAgICAgIHRoaXMuc3RpY2t5VG9wID0gdGhpcy5zdGlja3lCb3R0b20gLSBoZWlnaHQ7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdG9SZWxlYXNlID0gZmFsc2U7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAodG9SZWxlYXNlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWxlYXNlKHRoaXMuc3RpY2t5VG9wKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBJbiB0aGlzIGNhc2UsIFN0aWNreSBpcyBzaG9ydGVyIHRoZW4gdmlld3BvcnQgbWludXMgdG9wIG9mZnNldFxuICAgICAgICAgIC8vIGFuZCB3aWxsIGFsd2F5cyBmaXggdG8gdGhlIHRvcCBvZmZzZXQgb2Ygdmlld3BvcnRcbiAgICAgICAgICB0aGlzLmZpeCh0aGlzLnN0YXRlLnRvcCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5kZWx0YSA9IGRlbHRhO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjb21wb25lbnREaWRVcGRhdGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wcywgcHJldlN0YXRlKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgaWYgKHByZXZTdGF0ZS5zdGF0dXMgIT09IHRoaXMuc3RhdGUuc3RhdHVzICYmIHRoaXMucHJvcHMub25TdGF0ZUNoYW5nZSkge1xuICAgICAgICB0aGlzLnByb3BzLm9uU3RhdGVDaGFuZ2Uoe1xuICAgICAgICAgIHN0YXR1czogdGhpcy5zdGF0ZS5zdGF0dXNcbiAgICAgICAgfSk7XG4gICAgICB9IC8vIGNoZWNrIGlmIHdlIGFyZSB1cC10by1kYXRlLCBpcyB0cmlnZ2VyZWQgaW4gY2FzZSBvZiBzY3JvbGwgcmVzdG9yYXRpb25cblxuXG4gICAgICBpZiAodGhpcy5zdGF0ZS50b3AgIT09IHByZXZTdGF0ZS50b3ApIHtcbiAgICAgICAgdGhpcy51cGRhdGVJbml0aWFsRGltZW5zaW9uKCk7XG4gICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICB9XG5cbiAgICAgIHZhciBhcmVQcm9wc0NoYW5nZWQgPSAhc2hhbGxvd0VxdWFsKHRoaXMucHJvcHMsIHByZXZQcm9wcyk7XG5cbiAgICAgIGlmIChhcmVQcm9wc0NoYW5nZWQpIHtcbiAgICAgICAgLy8gaWYgdGhlIHByb3BzIGZvciBlbmFibGluZyBhcmUgdG9nZ2xlZCwgdGhlbiB0cmlnZ2VyIHRoZSB1cGRhdGUgb3IgcmVzZXQgZGVwZW5kaW5nIG9uIHRoZSBjdXJyZW50IHByb3BzXG4gICAgICAgIGlmIChwcmV2UHJvcHMuZW5hYmxlZCAhPT0gdGhpcy5wcm9wcy5lbmFibGVkKSB7XG4gICAgICAgICAgaWYgKHRoaXMucHJvcHMuZW5hYmxlZCkge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgIGFjdGl2YXRlZDogdHJ1ZVxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBfdGhpczIudXBkYXRlSW5pdGlhbERpbWVuc2lvbigpO1xuXG4gICAgICAgICAgICAgIF90aGlzMi51cGRhdGUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmYWxzZVxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBfdGhpczIucmVzZXQoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSAvLyBpZiB0aGUgdG9wIG9yIGJvdHRvbUJvdW5kYXJ5IHByb3BzIHdlcmUgY2hhbmdlZCwgdGhlbiB0cmlnZ2VyIHRoZSB1cGRhdGVcbiAgICAgICAgZWxzZSBpZiAocHJldlByb3BzLnRvcCAhPT0gdGhpcy5wcm9wcy50b3AgfHwgcHJldlByb3BzLmJvdHRvbUJvdW5kYXJ5ICE9PSB0aGlzLnByb3BzLmJvdHRvbUJvdW5kYXJ5KSB7XG4gICAgICAgICAgdGhpcy51cGRhdGVJbml0aWFsRGltZW5zaW9uKCk7XG4gICAgICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjb21wb25lbnRXaWxsVW5tb3VudFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgIHZhciBzdWJzY3JpYmVycyA9IHRoaXMuc3Vic2NyaWJlcnMgfHwgW107XG5cbiAgICAgIGZvciAodmFyIGkgPSBzdWJzY3JpYmVycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICB0aGlzLnN1YnNjcmliZXJzW2ldLnVuc3Vic2NyaWJlKCk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNvbXBvbmVudERpZE1vdW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgLy8gT25seSBpbml0aWFsaXplIHRoZSBnbG9iYWxzIGlmIHRoaXMgaXMgdGhlIGZpcnN0XG4gICAgICAvLyB0aW1lIHRoaXMgY29tcG9uZW50IHR5cGUgaGFzIGJlZW4gbW91bnRlZFxuICAgICAgaWYgKCF3aW4pIHtcbiAgICAgICAgd2luID0gd2luZG93O1xuICAgICAgICBkb2MgPSBkb2N1bWVudDtcbiAgICAgICAgZG9jRWwgPSBkb2MuZG9jdW1lbnRFbGVtZW50O1xuICAgICAgICBkb2NCb2R5ID0gZG9jLmJvZHk7XG4gICAgICAgIHdpbkhlaWdodCA9IHdpbi5pbm5lckhlaWdodCB8fCBkb2NFbC5jbGllbnRIZWlnaHQ7XG4gICAgICAgIE0gPSB3aW5kb3cuTW9kZXJuaXpyOyAvLyBObyBTdGlja3kgb24gbG93ZXItZW5kIGJyb3dzZXIgd2hlbiBubyBNb2Rlcm5penJcblxuICAgICAgICBpZiAoTSAmJiBNLnByZWZpeGVkKSB7XG4gICAgICAgICAgY2FuRW5hYmxlVHJhbnNmb3JtcyA9IE0uY3NzdHJhbnNmb3JtczNkO1xuICAgICAgICAgIFRSQU5TRk9STV9QUk9QID0gTS5wcmVmaXhlZCgndHJhbnNmb3JtJyk7XG4gICAgICAgIH1cbiAgICAgIH0gLy8gd2hlbiBtb3VudCwgdGhlIHNjcm9sbFRvcCBpcyBub3QgbmVjZXNzYXJ5IG9uIHRoZSB0b3BcblxuXG4gICAgICB0aGlzLnNjcm9sbFRvcCA9IGRvY0JvZHkuc2Nyb2xsVG9wICsgZG9jRWwuc2Nyb2xsVG9wO1xuXG4gICAgICBpZiAodGhpcy5wcm9wcy5lbmFibGVkKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgIGFjdGl2YXRlZDogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy51cGRhdGVJbml0aWFsRGltZW5zaW9uKCk7XG4gICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICB9IC8vIGJpbmQgdGhlIGxpc3RlbmVycyByZWdhcmRsZXNzIGlmIGluaXRpYWxseSBlbmFibGVkIC0gYWxsb3dzIHRoZSBjb21wb25lbnQgdG8gdG9nZ2xlIHN0aWNreSBmdW5jdGlvbmFsaXR5XG5cblxuICAgICAgdGhpcy5zdWJzY3JpYmVycyA9IFtzdWJzY3JpYmUoJ3Njcm9sbFN0YXJ0JywgdGhpcy5oYW5kbGVTY3JvbGxTdGFydC5iaW5kKHRoaXMpLCB7XG4gICAgICAgIHVzZVJBRjogdHJ1ZVxuICAgICAgfSksIHN1YnNjcmliZSgnc2Nyb2xsJywgdGhpcy5oYW5kbGVTY3JvbGwuYmluZCh0aGlzKSwge1xuICAgICAgICB1c2VSQUY6IHRydWUsXG4gICAgICAgIGVuYWJsZVNjcm9sbEluZm86IHRydWVcbiAgICAgIH0pLCBzdWJzY3JpYmUoJ3Jlc2l6ZScsIHRoaXMuaGFuZGxlUmVzaXplLmJpbmQodGhpcyksIHtcbiAgICAgICAgZW5hYmxlUmVzaXplSW5mbzogdHJ1ZVxuICAgICAgfSldO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJ0cmFuc2xhdGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gdHJhbnNsYXRlKHN0eWxlLCBwb3MpIHtcbiAgICAgIHZhciBlbmFibGVUcmFuc2Zvcm1zID0gY2FuRW5hYmxlVHJhbnNmb3JtcyAmJiB0aGlzLnByb3BzLmVuYWJsZVRyYW5zZm9ybXM7XG5cbiAgICAgIGlmIChlbmFibGVUcmFuc2Zvcm1zICYmIHRoaXMuc3RhdGUuYWN0aXZhdGVkKSB7XG4gICAgICAgIHN0eWxlW1RSQU5TRk9STV9QUk9QXSA9ICd0cmFuc2xhdGUzZCgwLCcgKyBNYXRoLnJvdW5kKHBvcykgKyAncHgsMCknO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3R5bGUudG9wID0gcG9zICsgJ3B4JztcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwic2hvdWxkQ29tcG9uZW50VXBkYXRlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNob3VsZENvbXBvbmVudFVwZGF0ZShuZXh0UHJvcHMsIG5leHRTdGF0ZSkge1xuICAgICAgcmV0dXJuICF0aGlzLnByb3BzLnNob3VsZEZyZWV6ZSgpICYmICEoc2hhbGxvd0VxdWFsKHRoaXMucHJvcHMsIG5leHRQcm9wcykgJiYgc2hhbGxvd0VxdWFsKHRoaXMuc3RhdGUsIG5leHRTdGF0ZSkpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIF9jbGFzc05hbWVzLFxuICAgICAgICAgIF90aGlzMyA9IHRoaXM7XG5cbiAgICAgIC8vIFRPRE8sIFwib3ZlcmZsb3c6IGF1dG9cIiBwcmV2ZW50cyBjb2xsYXBzZSwgbmVlZCBhIGdvb2Qgd2F5IHRvIGdldCBjaGlsZHJlbiBoZWlnaHRcbiAgICAgIHZhciBpbm5lclN0eWxlID0ge1xuICAgICAgICBwb3NpdGlvbjogdGhpcy5zdGF0ZS5zdGF0dXMgPT09IFNUQVRVU19GSVhFRCA/ICdmaXhlZCcgOiAncmVsYXRpdmUnLFxuICAgICAgICB0b3A6IHRoaXMuc3RhdGUuc3RhdHVzID09PSBTVEFUVVNfRklYRUQgPyAnMHB4JyA6ICcnLFxuICAgICAgICB6SW5kZXg6IHRoaXMucHJvcHMuaW5uZXJaXG4gICAgICB9O1xuICAgICAgdmFyIG91dGVyU3R5bGUgPSB7fTsgLy8gYWx3YXlzIHVzZSB0cmFuc2xhdGUzZCB0byBlbmhhbmNlIHRoZSBwZXJmb3JtYW5jZVxuXG4gICAgICB0aGlzLnRyYW5zbGF0ZShpbm5lclN0eWxlLCB0aGlzLnN0YXRlLnBvcyk7XG5cbiAgICAgIGlmICh0aGlzLnN0YXRlLnN0YXR1cyAhPT0gU1RBVFVTX09SSUdJTkFMKSB7XG4gICAgICAgIGlubmVyU3R5bGUud2lkdGggPSB0aGlzLnN0YXRlLndpZHRoICsgJ3B4JztcbiAgICAgICAgb3V0ZXJTdHlsZS5oZWlnaHQgPSB0aGlzLnN0YXRlLmhlaWdodCArICdweCc7XG4gICAgICB9XG5cbiAgICAgIHZhciBvdXRlckNsYXNzZXMgPSBjbGFzc05hbWVzKCdzdGlja3ktb3V0ZXItd3JhcHBlcicsIHRoaXMucHJvcHMuY2xhc3NOYW1lLCAoX2NsYXNzTmFtZXMgPSB7fSwgX2RlZmluZVByb3BlcnR5KF9jbGFzc05hbWVzLCB0aGlzLnByb3BzLmFjdGl2ZUNsYXNzLCB0aGlzLnN0YXRlLnN0YXR1cyA9PT0gU1RBVFVTX0ZJWEVEKSwgX2RlZmluZVByb3BlcnR5KF9jbGFzc05hbWVzLCB0aGlzLnByb3BzLnJlbGVhc2VkQ2xhc3MsIHRoaXMuc3RhdGUuc3RhdHVzID09PSBTVEFUVVNfUkVMRUFTRUQpLCBfY2xhc3NOYW1lcykpO1xuICAgICAgdmFyIGlubmVyQ2xhc3NlcyA9IGNsYXNzTmFtZXMoJ3N0aWNreS1pbm5lci13cmFwcGVyJywgdGhpcy5wcm9wcy5pbm5lckNsYXNzLCBfZGVmaW5lUHJvcGVydHkoe30sIHRoaXMucHJvcHMuaW5uZXJBY3RpdmVDbGFzcywgdGhpcy5zdGF0ZS5zdGF0dXMgPT09IFNUQVRVU19GSVhFRCkpO1xuICAgICAgdmFyIGNoaWxkcmVuID0gdGhpcy5wcm9wcy5jaGlsZHJlbjtcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgIHJlZjogZnVuY3Rpb24gcmVmKG91dGVyKSB7XG4gICAgICAgICAgX3RoaXMzLm91dGVyRWxlbWVudCA9IG91dGVyO1xuICAgICAgICB9LFxuICAgICAgICBjbGFzc05hbWU6IG91dGVyQ2xhc3NlcyxcbiAgICAgICAgc3R5bGU6IG91dGVyU3R5bGVcbiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgcmVmOiBmdW5jdGlvbiByZWYoaW5uZXIpIHtcbiAgICAgICAgICBfdGhpczMuaW5uZXJFbGVtZW50ID0gaW5uZXI7XG4gICAgICAgIH0sXG4gICAgICAgIGNsYXNzTmFtZTogaW5uZXJDbGFzc2VzLFxuICAgICAgICBzdHlsZTogaW5uZXJTdHlsZVxuICAgICAgfSwgdHlwZW9mIGNoaWxkcmVuID09PSAnZnVuY3Rpb24nID8gY2hpbGRyZW4oe1xuICAgICAgICBzdGF0dXM6IHRoaXMuc3RhdGUuc3RhdHVzXG4gICAgICB9KSA6IGNoaWxkcmVuKSk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFN0aWNreTtcbn0oQ29tcG9uZW50KTtcblxuU3RpY2t5LmRpc3BsYXlOYW1lID0gJ1N0aWNreSc7XG5TdGlja3kuZGVmYXVsdFByb3BzID0ge1xuICBzaG91bGRGcmVlemU6IGZ1bmN0aW9uIHNob3VsZEZyZWV6ZSgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH0sXG4gIGVuYWJsZWQ6IHRydWUsXG4gIHRvcDogMCxcbiAgYm90dG9tQm91bmRhcnk6IDAsXG4gIGVuYWJsZVRyYW5zZm9ybXM6IHRydWUsXG4gIGFjdGl2ZUNsYXNzOiAnYWN0aXZlJyxcbiAgcmVsZWFzZWRDbGFzczogJ3JlbGVhc2VkJyxcbiAgb25TdGF0ZUNoYW5nZTogbnVsbCxcbiAgaW5uZXJDbGFzczogJycsXG4gIGlubmVyQWN0aXZlQ2xhc3M6ICcnXG59O1xuLyoqXG4gKiBAcGFyYW0ge0Jvb2x9IGVuYWJsZWQgQSBzd2l0Y2ggdG8gZW5hYmxlIG9yIGRpc2FibGUgU3RpY2t5LlxuICogQHBhcmFtIHtTdHJpbmcvTnVtYmVyfSB0b3AgQSB0b3Agb2Zmc2V0IHB4IGZvciBTdGlja3kuIENvdWxkIGJlIGEgc2VsZWN0b3IgcmVwcmVzZW50aW5nIGEgbm9kZVxuICogICAgICAgIHdob3NlIGhlaWdodCBzaG91bGQgc2VydmUgYXMgdGhlIHRvcCBvZmZzZXQuXG4gKiBAcGFyYW0ge1N0cmluZy9OdW1iZXJ9IGJvdHRvbUJvdW5kYXJ5IEEgYm90dG9tIGJvdW5kYXJ5IHB4IG9uIGRvY3VtZW50IHdoZXJlIFN0aWNreSB3aWxsIHN0b3AuXG4gKiAgICAgICAgQ291bGQgYmUgYSBzZWxlY3RvciByZXByZXNlbnRpbmcgYSBub2RlIHdob3NlIGJvdHRvbSBzaG91bGQgc2VydmUgYXMgdGhlIGJvdHRvbSBib3VkYXJ5LlxuICovXG5cblN0aWNreS5wcm9wVHlwZXMgPSB7XG4gIGVuYWJsZWQ6IFByb3BUeXBlcy5ib29sLFxuICB0b3A6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5zdHJpbmcsIFByb3BUeXBlcy5udW1iZXJdKSxcbiAgYm90dG9tQm91bmRhcnk6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5vYmplY3QsIC8vIFRPRE8sIG1heSByZW1vdmVcbiAgUHJvcFR5cGVzLnN0cmluZywgUHJvcFR5cGVzLm51bWJlcl0pLFxuICBlbmFibGVUcmFuc2Zvcm1zOiBQcm9wVHlwZXMuYm9vbCxcbiAgYWN0aXZlQ2xhc3M6IFByb3BUeXBlcy5zdHJpbmcsXG4gIHJlbGVhc2VkQ2xhc3M6IFByb3BUeXBlcy5zdHJpbmcsXG4gIGlubmVyQ2xhc3M6IFByb3BUeXBlcy5zdHJpbmcsXG4gIGlubmVyQWN0aXZlQ2xhc3M6IFByb3BUeXBlcy5zdHJpbmcsXG4gIGNsYXNzTmFtZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgb25TdGF0ZUNoYW5nZTogUHJvcFR5cGVzLmZ1bmMsXG4gIHNob3VsZEZyZWV6ZTogUHJvcFR5cGVzLmZ1bmMsXG4gIGlubmVyWjogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLnN0cmluZywgUHJvcFR5cGVzLm51bWJlcl0pXG59O1xuU3RpY2t5LlNUQVRVU19PUklHSU5BTCA9IFNUQVRVU19PUklHSU5BTDtcblN0aWNreS5TVEFUVVNfUkVMRUFTRUQgPSBTVEFUVVNfUkVMRUFTRUQ7XG5TdGlja3kuU1RBVFVTX0ZJWEVEID0gU1RBVFVTX0ZJWEVEO1xuZXhwb3J0IGRlZmF1bHQgU3RpY2t5OyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/react-stickynode/dist/es/Sticky.js\n");

/***/ })

};
;